language: generic

services:
  - docker

script:
  - docker build --build-arg QT_VERSION --build-arg IFW_VERSION=${IFW_VERSION} -t ${DOCKER_USERNAME}/qt:${UBUNTU_CODENAME}-${QT_VERSION} -f ${UBUNTU_CODENAME}.Dockerfile .
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker push ${DOCKER_USERNAME}/qt:${UBUNTU_CODENAME}-${QT_VERSION}

matrix:
  include:
    - env: QT_VERSION=4.9.8 IFW_VERSION=3.1.1 UBUNTU_CODENAME=xenial
    - env: QT_VERSION=4.9.8 IFW_VERSION=3.1.1 UBUNTU_CODENAME=bionic
